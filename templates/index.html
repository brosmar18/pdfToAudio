<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF to Audio Converter</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <h1>PDF to Audio Converter</h1>
    
    <form method="post" enctype="multipart/form-data" id="convertForm">
        <label for="pdf_file">Select a PDF file:</label>
        <input type="file" name="pdf_file" accept=".pdf" required>
        <button type="submit" id="convertBtn">Convert to Audio</button>
    </form>
    
    <div id="loading" style="display: none;">
        <p>Converting... Please wait</p>
        <div class="progress">
            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
        </div>
    </div>
    
    <div id="success" style="display: none;">
        <p>Conversion successful! You can download the audio file.</p>
        <a href="{{ url_for('download_audio') }}" class="btn btn-primary" download>Download Audio</a>
    </div>
    
    
    
    {% if audio_file_path %}
    <audio controls>
        <source src="{{ audio_file_path }}" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    {% endif %}
    
    <script>
        const convertForm = document.getElementById('convertForm');
        const convertBtn = document.getElementById('convertBtn');
        const loadingDiv = document.getElementById('loading');
        const successDiv = document.getElementById('success');

        convertForm.addEventListener('submit', (event) => {
            event.preventDefault();
            convertBtn.disabled = true;
            loadingDiv.style.display = 'block';
            
            // Simulate the conversion process (you can replace this with your actual conversion code)
            simulateConversion();
        });

        function simulateConversion() {
            let progress = 0;
            const progressBar = document.querySelector('.progress-bar');
            const interval = setInterval(() => {
                progress += 10;
                progressBar.style.width = `${progress}%`;
                progressBar.setAttribute('aria-valuenow', progress);
                if (progress >= 100) {
                    clearInterval(interval);
                    loadingDiv.style.display = 'none';
                    successDiv.style.display = 'block';
                }
            }, 500);
        }
    </script>
</body>

</html>
